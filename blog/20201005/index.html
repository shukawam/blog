<!doctype html><html lang=ja><head><meta charset=utf-8><title>Spring Boot ApplicationからAutonomous Transaction Processing（ATP）に接続する - Kawash's Daily Blog</title><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Hugo 0.74.2"><meta itemprop=name content="Spring Boot ApplicationからAutonomous Transaction Processing（ATP）に接続する"><meta itemprop=description content="始めに 環境 手順  ATP を作成する ウォレットをダウンロードする アプリケーションで DB の接続設定をする  ひな型作成 Doma2 を依存関係に追加  Eclipse 用の設定を追加   DB の接続設定を追加   起動の確認を行う API の作成   終わりに 参考  始めに Spring Boot アプリケーションから Autonomous Transaction Processing（以下、ATP） に接続する手順を記載します。また、動作確認用に簡単な API も作成したいと思います。OR Mapper として Doma2 を使用していますが、何でも構いません。
環境  Windows 10 Java 15  Spring Boot 2.3.4.RELEASE Doma 2.43.0   Autonomous Transaction Processing  手順 ATP を作成する まずは、接続先の DB がないと話にならないので以下のように入力し ATP を作成します。"><meta itemprop=datePublished content="2020-10-05T00:00:00+00:00"><meta itemprop=dateModified content="2020-10-05T00:00:00+00:00"><meta itemprop=wordCount content="646"><meta itemprop=image content><meta itemprop=keywords content="Spring Boot,nomous Transaction Processing Database,Oracle Cloud Infrastructure,Doma2,"><meta property="og:title" content="Spring Boot ApplicationからAutonomous Transaction Processing（ATP）に接続する"><meta property="og:description" content="始めに 環境 手順  ATP を作成する ウォレットをダウンロードする アプリケーションで DB の接続設定をする  ひな型作成 Doma2 を依存関係に追加  Eclipse 用の設定を追加   DB の接続設定を追加   起動の確認を行う API の作成   終わりに 参考  始めに Spring Boot アプリケーションから Autonomous Transaction Processing（以下、ATP） に接続する手順を記載します。また、動作確認用に簡単な API も作成したいと思います。OR Mapper として Doma2 を使用していますが、何でも構いません。
環境  Windows 10 Java 15  Spring Boot 2.3.4.RELEASE Doma 2.43.0   Autonomous Transaction Processing  手順 ATP を作成する まずは、接続先の DB がないと話にならないので以下のように入力し ATP を作成します。"><meta property="og:type" content="article"><meta property="og:url" content="https://shukawam.github.io/blog/blog/20201005/"><meta property="og:image" content><meta property="article:published_time" content="2020-10-05T00:00:00+00:00"><meta property="article:modified_time" content="2020-10-05T00:00:00+00:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content><meta name=twitter:title content="Spring Boot ApplicationからAutonomous Transaction Processing（ATP）に接続する"><meta name=twitter:description content="始めに 環境 手順  ATP を作成する ウォレットをダウンロードする アプリケーションで DB の接続設定をする  ひな型作成 Doma2 を依存関係に追加  Eclipse 用の設定を追加   DB の接続設定を追加   起動の確認を行う API の作成   終わりに 参考  始めに Spring Boot アプリケーションから Autonomous Transaction Processing（以下、ATP） に接続する手順を記載します。また、動作確認用に簡単な API も作成したいと思います。OR Mapper として Doma2 を使用していますが、何でも構いません。
環境  Windows 10 Java 15  Spring Boot 2.3.4.RELEASE Doma 2.43.0   Autonomous Transaction Processing  手順 ATP を作成する まずは、接続先の DB がないと話にならないので以下のように入力し ATP を作成します。"><meta name=twitter:site content="@_shu_kawa"><link rel=stylesheet href=/blog/css/bundle.min.6efc0db28c70b295c4e7133745474d307d061687d1b7d4f1665d862461ef2f4b.css integrity="sha256-bvwNsoxwspXE5xM3RUdNMH0GFofRt9TxZl2GJGHvL0s="><link rel=stylesheet href=/blog/css/add-on.css></head><body><header id=site-header><nav id=site-nav><h1 class=nav-title><a href=/blog/ class=nav>ブログ</a></h1><menu id=site-nav-menu class="flyout-menu menu"><a href=/blog class="nav link"><i class="fa fa-home"></i>Home</a>
<a href=/blog/blog/ class="nav link"><i class="far fa-newspaper"></i>Blog</a>
<a href=#share-menu class="nav link share-toggle"><i class="fas fa-share-alt">&nbsp;</i>Share</a>
<a href=#search-input class="nav link search-toggle"><i class="fas fa-search">&nbsp;</i>Search</a></menu>
<a href=#search-input class="nav search-toggle"><i class="fas fa-search fa-2x">&nbsp;</i></a>
<a href=#share-menu class="nav share-toggle"><i class="fas fa-share-alt fa-2x">&nbsp;</i></a>
<a href=#lang-menu class="nav lang-toggle" lang=ja>ja</a>
<a href=#site-nav class="nav nav-toggle"><i class="fas fa-bars fa-2x"></i></a></nav><menu id=search class=menu><input id=search-input class="search-input menu"></input><div id=search-results class="search-results menu"></div></menu><menu id=lang-menu class="flyout-menu menu"><a href=# lang=ja class="nav link active">日本語 (ja)</a>
<a href=/blog/en lang=en class="nav no-lang link">English (en)</a></menu>
<menu id=share-menu class="flyout-menu menu"><h1>Share Post</h1><a href="//twitter.com/share?text=Spring%20Boot%20Application%e3%81%8b%e3%82%89Autonomous%20Transaction%20Processing%ef%bc%88ATP%ef%bc%89%e3%81%ab%e6%8e%a5%e7%b6%9a%e3%81%99%e3%82%8b&url=https%3a%2f%2fshukawam.github.io%2fblog%2fblog%2f20201005%2f" target=_blank rel=noopener class="nav share-btn twitter"><p>Twitter</p></a><a href="//www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fshukawam.github.io%2fblog%2fblog%2f20201005%2f" target=_blank rel=noopener class="nav share-btn facebook"><p>Facebook</p></a><a href="//www.reddit.com/submit?url=https%3a%2f%2fshukawam.github.io%2fblog%2fblog%2f20201005%2f&title=Spring%20Boot%20Application%e3%81%8b%e3%82%89Autonomous%20Transaction%20Processing%ef%bc%88ATP%ef%bc%89%e3%81%ab%e6%8e%a5%e7%b6%9a%e3%81%99%e3%82%8b" target=_blank rel=noopener class="nav share-btn reddit"><p>Reddit</p></a><a href="//www.linkedin.com/shareArticle?url=https%3a%2f%2fshukawam.github.io%2fblog%2fblog%2f20201005%2f&title=Spring%20Boot%20Application%e3%81%8b%e3%82%89Autonomous%20Transaction%20Processing%ef%bc%88ATP%ef%bc%89%e3%81%ab%e6%8e%a5%e7%b6%9a%e3%81%99%e3%82%8b" target=_blank rel=noopener class="nav share-btn linkedin"><p>LinkedIn</p></a><a href="//www.pinterest.com/pin/create/button/?url=https%3a%2f%2fshukawam.github.io%2fblog%2fblog%2f20201005%2f&description=Spring%20Boot%20Application%e3%81%8b%e3%82%89Autonomous%20Transaction%20Processing%ef%bc%88ATP%ef%bc%89%e3%81%ab%e6%8e%a5%e7%b6%9a%e3%81%99%e3%82%8b" target=_blank rel=noopener class="nav share-btn pinterest"><p>Pinterest</p></a><a href="mailto:?subject=%e3%81%93%e3%81%ae%e6%8a%95%e7%a8%bf%e3%82%92%e3%83%81%e3%82%a7%e3%83%83%e3%82%af%e3%81%99%e3%82%8b Shuhei%2c%20Kawamura&body=https%3a%2f%2fshukawam.github.io%2fblog%2fblog%2f20201005%2f" target=_blank class="nav share-btn email" data-proofer-ignore><p>Email</p></a></menu></header><div id=wrapper><section id=site-intro><a href=/blog/><img src=https://shukawam.github.io/blog/img/main/icon.JPG class=circle width=100 alt="Shuhei, Kawamura"></a><header><h1>Shuhei, Kawamura</h1></header><main><p>Interested in Serverless, IaC, Microservices.</p></main><footer><ul class=socnet-icons><li><a href=//github.com/shukawam target=_blank rel=noopener title=GitHub class="fab fa-github"></a></li><li><a href=//gitlab.com/s.kawamura target=_blank rel=noopener title=GitLab class="fab fa-gitlab"></a></li><li><a href=//twitter.com/_shu_kawa target=_blank rel=noopener title=Twitter class="fab fa-twitter"></a></li><li><a href=mailto:s001.kawamura@gmail.com target=_blank title=Email class="far fa-envelope"></a></li></ul></footer></section><main id=site-main><article class=post><header><div class=title><h2><a href=/blog/blog/20201005/>Spring Boot ApplicationからAutonomous Transaction Processing（ATP）に接続する</a></h2></div><div class=meta><time datetime="2020-10-05 00:00:00 +0000 UTC">2020-10-05</time><p>Shuhei, Kawamura</p><p>4 分で読めます</p></div></header><div id=socnet-share><a href="//twitter.com/share?text=Spring%20Boot%20Application%e3%81%8b%e3%82%89Autonomous%20Transaction%20Processing%ef%bc%88ATP%ef%bc%89%e3%81%ab%e6%8e%a5%e7%b6%9a%e3%81%99%e3%82%8b&url=https%3a%2f%2fshukawam.github.io%2fblog%2fblog%2f20201005%2f" target=_blank rel=noopener class="nav share-btn twitter"><p>Twitter</p></a><a href="//www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fshukawam.github.io%2fblog%2fblog%2f20201005%2f" target=_blank rel=noopener class="nav share-btn facebook"><p>Facebook</p></a><a href="//www.reddit.com/submit?url=https%3a%2f%2fshukawam.github.io%2fblog%2fblog%2f20201005%2f&title=Spring%20Boot%20Application%e3%81%8b%e3%82%89Autonomous%20Transaction%20Processing%ef%bc%88ATP%ef%bc%89%e3%81%ab%e6%8e%a5%e7%b6%9a%e3%81%99%e3%82%8b" target=_blank rel=noopener class="nav share-btn reddit"><p>Reddit</p></a><a href="//www.linkedin.com/shareArticle?url=https%3a%2f%2fshukawam.github.io%2fblog%2fblog%2f20201005%2f&title=Spring%20Boot%20Application%e3%81%8b%e3%82%89Autonomous%20Transaction%20Processing%ef%bc%88ATP%ef%bc%89%e3%81%ab%e6%8e%a5%e7%b6%9a%e3%81%99%e3%82%8b" target=_blank rel=noopener class="nav share-btn linkedin"><p>LinkedIn</p></a><a href="//www.pinterest.com/pin/create/button/?url=https%3a%2f%2fshukawam.github.io%2fblog%2fblog%2f20201005%2f&description=Spring%20Boot%20Application%e3%81%8b%e3%82%89Autonomous%20Transaction%20Processing%ef%bc%88ATP%ef%bc%89%e3%81%ab%e6%8e%a5%e7%b6%9a%e3%81%99%e3%82%8b" target=_blank rel=noopener class="nav share-btn pinterest"><p>Pinterest</p></a><a href="mailto:?subject=%e3%81%93%e3%81%ae%e6%8a%95%e7%a8%bf%e3%82%92%e3%83%81%e3%82%a7%e3%83%83%e3%82%af%e3%81%99%e3%82%8b Shuhei%2c%20Kawamura&body=https%3a%2f%2fshukawam.github.io%2fblog%2fblog%2f20201005%2f" target=_blank class="nav share-btn email" data-proofer-ignore><p>Email</p></a></div><div class=content><a href=/blog/blog/20201005/ class=image style="--bg-image: url('https://shukawam.github.io/blog/img/2020/1004/main.png')"><img src=https://shukawam.github.io/blog/img/2020/1004/main.png alt=main></a><ul><li><a href=#%E5%A7%8B%E3%82%81%E3%81%AB>始めに</a></li><li><a href=#%E7%92%B0%E5%A2%83>環境</a></li><li><a href=#%E6%89%8B%E9%A0%86>手順</a><ul><li><a href=#atp-%E3%82%92%E4%BD%9C%E6%88%90%E3%81%99%E3%82%8B>ATP を作成する</a></li><li><a href=#%E3%82%A6%E3%82%A9%E3%83%AC%E3%83%83%E3%83%88%E3%82%92%E3%83%80%E3%82%A6%E3%83%B3%E3%83%AD%E3%83%BC%E3%83%89%E3%81%99%E3%82%8B>ウォレットをダウンロードする</a></li><li><a href=#%E3%82%A2%E3%83%97%E3%83%AA%E3%82%B1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E3%81%A7-db-%E3%81%AE%E6%8E%A5%E7%B6%9A%E8%A8%AD%E5%AE%9A%E3%82%92%E3%81%99%E3%82%8B>アプリケーションで DB の接続設定をする</a><ul><li><a href=#%E3%81%B2%E3%81%AA%E5%9E%8B%E4%BD%9C%E6%88%90>ひな型作成</a></li><li><a href=#doma2-%E3%82%92%E4%BE%9D%E5%AD%98%E9%96%A2%E4%BF%82%E3%81%AB%E8%BF%BD%E5%8A%A0>Doma2 を依存関係に追加</a><ul><li><a href=#eclipse-%E7%94%A8%E3%81%AE%E8%A8%AD%E5%AE%9A%E3%82%92%E8%BF%BD%E5%8A%A0>Eclipse 用の設定を追加</a></li></ul></li><li><a href=#db-%E3%81%AE%E6%8E%A5%E7%B6%9A%E8%A8%AD%E5%AE%9A%E3%82%92%E8%BF%BD%E5%8A%A0>DB の接続設定を追加</a></li></ul></li><li><a href=#%E8%B5%B7%E5%8B%95%E3%81%AE%E7%A2%BA%E8%AA%8D%E3%82%92%E8%A1%8C%E3%81%86>起動の確認を行う</a></li><li><a href=#api-%E3%81%AE%E4%BD%9C%E6%88%90>API の作成</a></li></ul></li><li><a href=#%E7%B5%82%E3%82%8F%E3%82%8A%E3%81%AB>終わりに</a></li><li><a href=#%E5%8F%82%E8%80%83>参考</a></li></ul><h1 id=始めに>始めに</h1><p>Spring Boot アプリケーションから <a href=https://docs.oracle.com/cd/E83857_01/paas/atp-cloud/index.html>Autonomous Transaction Processing</a>（以下、ATP） に接続する手順を記載します。また、動作確認用に簡単な API も作成したいと思います。OR Mapper として Doma2 を使用していますが、何でも構いません。</p><h1 id=環境>環境</h1><ul><li>Windows 10</li><li>Java 15<ul><li>Spring Boot 2.3.4.RELEASE</li><li>Doma 2.43.0</li></ul></li><li>Autonomous Transaction Processing</li></ul><h1 id=手順>手順</h1><h2 id=atp-を作成する>ATP を作成する</h2><p>まずは、接続先の DB がないと話にならないので以下のように入力し ATP を作成します。</p><p><img src=https://shukawam.github.io/blog/img/2020/1004/img01.png alt=img01></p><p><img src=https://shukawam.github.io/blog/img/2020/1004/img02.png alt=img02></p><ul><li>表示名：My Work（任意の名前で結構です）</li><li>データベース名：MyWork（任意の名前で結構です）</li><li>ワークロード・タイプの選択：トランザクション処理</li><li>デプロイメント・タイプの選択：共有インフラストラクチャ</li><li>データベースの構成：Always Free にチェックを入れておくと良いです</li><li>管理者資格証明の作成：パスワードポリシーを満たすようなパスワードを入力します</li><li>ネットワーク・アクセスの選択：すべての場所からのセキュア・アクセスを許可</li><li>ライセンスタイプの選択：ライセンス込み</li></ul><p>しばらくすると、プロビジョニングが完了し作成した ATP が使用可能になります。</p><p><img src=https://shukawam.github.io/blog/img/2020/1004/img03.png alt=img03></p><h2 id=ウォレットをダウンロードする>ウォレットをダウンロードする</h2><p>作成した ATP を選択し、「DB 接続」ボタンを押下すると、ウォレット（資格証明）がダウンロードできるのでダウロードし、適当なディレクトリに展開しておきます。</p><p><img src=https://shukawam.github.io/blog/img/2020/1004/img04.png alt=img04></p><h2 id=アプリケーションで-db-の接続設定をする>アプリケーションで DB の接続設定をする</h2><h3 id=ひな型作成>ひな型作成</h3><p><a href=https://start.spring.io/>Spring Initializr</a>から zip をダウンロードし、任意の IDE に取り込みます。</p><p>参考までに今回のアプリケーションのひな型を作成するのに使用した<a href="https://start.spring.io/#!type=gradle-project&language=java&platformVersion=2.3.4.RELEASE&packaging=jar&jvmVersion=15&groupId=com.example&artifactId=springboot-atp-connection-sample&name=springboot-atp-connection-sample&description=Demo%20project%20for%20Spring%20Boot&packageName=com.example.springboot-atp-connection-sample&dependencies=lombok,configuration-processor,devtools,web,jdbc,oracle">設定の URL</a>を貼っておきます。</p><h3 id=doma2-を依存関係に追加>Doma2 を依存関係に追加</h3><p><code>build.gradle</code>に以下を追加します。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-gradle data-lang=gradle>plugins <span style=color:#f92672>{</span>
  <span style=color:#75715e>// ... 省略
</span><span style=color:#75715e></span>  id <span style=color:#e6db74>&#39;com.diffplug.eclipse.apt&#39;</span> version <span style=color:#e6db74>&#39;3.22.0&#39;</span> <span style=color:#75715e>// ... 1
</span><span style=color:#75715e></span><span style=color:#f92672>}</span>

<span style=color:#75715e>// ... 省略
</span><span style=color:#75715e></span>
dependencies <span style=color:#f92672>{</span>
  <span style=color:#75715e>// ... 省略
</span><span style=color:#75715e></span>  implementation <span style=color:#e6db74>&#39;org.seasar.doma:doma-core:2.43.0&#39;</span>
  implementation <span style=color:#e6db74>&#39;org.seasar.doma.boot:doma-spring-boot-starter:1.4.0&#39;</span>
  annotationProcessor <span style=color:#e6db74>&#39;org.seasar.doma:doma-processor:2.43.0&#39;</span>
<span style=color:#f92672>}</span>

<span style=color:#75715e>// ... 省略
</span></code></pre></div><h4 id=eclipse-用の設定を追加>Eclipse 用の設定を追加</h4><p>本項目は、IDE として Eclipse を使用している場合のみ、必要な項目となります。注釈処理周りの設定を実施してくれるプラグインのため、Eclipse × Doma の組み合わせで開発している方は是非入れましょう。</p><h3 id=db-の接続設定を追加>DB の接続設定を追加</h3><p><code>src/main/resources/application.properties</code>に以下のプロパティを追加します。</p><pre><code class=language-properties data-lang=properties># Database connection settings
spring.datasource.driver-class-name=oracle.jdbc.OracleDriver
spring.datasource.url=jdbc:oracle:thin:@&lt;DatabaseName&gt;_medium?TNS_ADMIN=&lt;YourPath&gt;
spring.datasource.username=&lt;Username&gt;
spring.datasource.password=&lt;Password&gt;

# Doma2
doma.dialect=oracle
</code></pre><ul><li>DatabaseName：先ほど作成した DB の名前を指定します（今回だと<code>MyWork</code>）</li><li>YourPath：Wallet ファイルを展開したディレクトリを指定します</li><li>Username：DB のユーザ名を指定します</li><li>Password：指定したユーザのパスワードを指定します</li></ul><h2 id=起動の確認を行う>起動の確認を行う</h2><pre><code>  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::        (v2.3.4.RELEASE)

2020-10-05 22:59:56.496  INFO 17712 --- [  restartedMain] SpringbootAtpConnectionSampleApplication : Starting SpringbootAtpConnectionSampleApplication on DESKTOP-DCQ3PA2 with PID 17712 (C:\Git\springboot-atp-connection-sample\bin\main started by kwmr1 in C:\Git\springboot-atp-connection-sample)
2020-10-05 22:59:56.499  INFO 17712 --- [  restartedMain] SpringbootAtpConnectionSampleApplication : No active profile set, falling back to default profiles: default
2020-10-05 22:59:56.544  INFO 17712 --- [  restartedMain] o.s.b.devtools.restart.ChangeableUrls    : The Class-Path manifest attribute in C:\Users\kwmr1\.gradle\caches\modules-2\files-2.1\com.oracle.database.jdbc\ojdbc8\19.3.0.0\967c0b1a2d5b1435324de34a9b8018d294f8f47b\ojdbc8-19.3.0.0.jar referenced one or more files that do not exist: file:/C:/Users/kwmr1/.gradle/caches/modules-2/files-2.1/com.oracle.database.jdbc/ojdbc8/19.3.0.0/967c0b1a2d5b1435324de34a9b8018d294f8f47b/oraclepki.jar
2020-10-05 22:59:56.544  INFO 17712 --- [  restartedMain] o.s.b.devtools.restart.ChangeableUrls    : The Class-Path manifest attribute in C:\Users\kwmr1\.gradle\caches\modules-2\files-2.1\com.oracle.database.security\oraclepki\19.3.0.0\e52a34f271c6c62ee1a73b71cc19da5459b709f\oraclepki-19.3.0.0.jar referenced one or more files that do not exist: file:/C:/Users/kwmr1/.gradle/caches/modules-2/files-2.1/com.oracle.database.security/oraclepki/19.3.0.0/e52a34f271c6c62ee1a73b71cc19da5459b709f/osdt_core.jar,file:/C:/Users/kwmr1/.gradle/caches/modules-2/files-2.1/com.oracle.database.security/oraclepki/19.3.0.0/e52a34f271c6c62ee1a73b71cc19da5459b709f/osdt_cert.jar,file:/C:/Users/kwmr1/.gradle/caches/modules-2/files-2.1/com.oracle.database.security/oraclepki/19.3.0.0/oracle.osdt/osdt_core.jar,file:/C:/Users/kwmr1/.gradle/caches/modules-2/files-2.1/com.oracle.database.security/oraclepki/19.3.0.0/oracle.osdt/osdt_cert.jar
2020-10-05 22:59:56.544  INFO 17712 --- [  restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2020-10-05 22:59:56.544  INFO 17712 --- [  restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2020-10-05 22:59:57.493  INFO 17712 --- [  restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)
2020-10-05 22:59:57.502  INFO 17712 --- [  restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2020-10-05 22:59:57.502  INFO 17712 --- [  restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.38]
2020-10-05 22:59:57.590  INFO 17712 --- [  restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2020-10-05 22:59:57.590  INFO 17712 --- [  restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1046 ms
2020-10-05 22:59:57.795  INFO 17712 --- [  restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'applicationTaskExecutor'
2020-10-05 22:59:58.076  INFO 17712 --- [  restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2020-10-05 23:00:29.179 ERROR 17712 --- [  restartedMain] oracle.simplefan.FanManager              : attempt to configure ONS in FanManager failed with oracle.ons.NoServersAvailable: Subscription time out
2020-10-05 23:00:29.204  INFO 17712 --- [  restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2020-10-05 23:00:29.273  INFO 17712 --- [  restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2020-10-05 23:00:29.310  INFO 17712 --- [  restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8080 (http) with context path ''
2020-10-05 23:00:29.326  INFO 17712 --- [  restartedMain] SpringbootAtpConnectionSampleApplication : Started SpringbootAtpConnectionSampleApplication in 33.109 seconds (JVM running for 33.881)
</code></pre><p>上記のように表示されれば、Spring Boot アプリケーションから ATP への接続は成功しています。（結構起動までに時間がかかります。大体 30 秒程度）</p><h2 id=api-の作成>API の作成</h2><p>今回は API を作成することがメインではないので、中身を真似したい場合は、<a href=https://github.com/shukawam/springboot-atp-connection-sample>リポジトリ</a>を参照してください。</p><p><code>e2e</code>に格納している簡易テスト用のスクリプトを実行し、以下のような結果が返却されれば成功です。</p><pre><code>HTTP/1.1 200
Content-Type: application/json
Transfer-Encoding: chunked
Date: Mon, 05 Oct 2020 14:50:37 GMT
Connection: close

[
  {
    &quot;employeeId&quot;: &quot;001&quot;,
    &quot;employeeName&quot;: &quot;Hillel Slovak&quot;
  },
  {
    &quot;employeeId&quot;: &quot;002&quot;,
    &quot;employeeName&quot;: &quot;Jack Sherman&quot;
  },
  {
    &quot;employeeId&quot;: &quot;003&quot;,
    &quot;employeeName&quot;: &quot;DeWayne McKnigh&quot;
  },
  {
    &quot;employeeId&quot;: &quot;004&quot;,
    &quot;employeeName&quot;: &quot;John Frusciante&quot;
  },
  {
    &quot;employeeId&quot;: &quot;005&quot;,
    &quot;employeeName&quot;: &quot;Arik Marshall&quot;
  },
  {
    &quot;employeeId&quot;: &quot;006&quot;,
    &quot;employeeName&quot;: &quot;Jesse Tobias&quot;
  },
  {
    &quot;employeeId&quot;: &quot;007&quot;,
    &quot;employeeName&quot;: &quot;Dave Navarro&quot;
  },
  {
    &quot;employeeId&quot;: &quot;008&quot;,
    &quot;employeeName&quot;: &quot;Josh Klinghoffer&quot;
  },
  {
    &quot;employeeId&quot;: &quot;009&quot;,
    &quot;employeeName&quot;: &quot;John Frusciante&quot;
  }
]
</code></pre><p>こちらも初回リクエストは、15000ms 程度かかりますね。</p><p>余談ですが、返却された従業員のリストの名前は、Red Hot Chili Peppers の歴代のギタリストです！RHCP は最高です。</p><h1 id=終わりに>終わりに</h1><p>公式のドキュメントで<a href=https://docs.oracle.com/cd/E60665_01/tutorials_ja/atp_jdbc_springboot/index.html>nomous Transaction Processing データベース、SpringBoot および JDBC</a>に設定方法が記載されていますが、xml に設定を記載するのではなく<code>application.properties</code>に設定を寄せてみました。同じような設定をしたい方に参考になれば幸いです。</p><h1 id=参考>参考</h1><ul><li><a href=https://docs.oracle.com/cd/E60665_01/tutorials_ja/atp_jdbc_springboot/index.html>nomous Transaction Processing データベース、SpringBoot および JDBC</a></li></ul></div><footer><div class=stats><ul class=categories><li><a class=article-terms-link href=/blog/categories/tech/>tech</a></li></ul><ul class=tags><li><a class=article-terms-link href=/blog/tags/spring-boot/>Spring Boot</a></li><li><a class=article-terms-link href=/blog/tags/nomous-transaction-processing-database/>nomous Transaction Processing Database</a></li><li><a class=article-terms-link href=/blog/tags/oracle-cloud-infrastructure/>Oracle Cloud Infrastructure</a></li><li><a class=article-terms-link href=/blog/tags/doma2/>Doma2</a></li></ul></div></footer></article><article class=post><div><h2 id=say-something>何か言ってください</h2><form id=comment-form class=new-comment method=post><h3 class="reply-notice hidden"><span class=reply-name></span></h3><input type=hidden name=options[entryId] value=d299cb3c0506f17456965c3c16d383db>
<input type=hidden name=fields[replyThread]>
<input type=hidden name=fields[replyID]>
<input type=hidden name=fields[replyName]>
<input required name=fields[name] type=text placeholder=あなたの名前>
<input name=fields[website] type=text placeholder=あなたのウェブサイト>
<input required name=fields[email] type=email placeholder=あなたのメール>
<textarea required name=fields[body] placeholder=あなたのメッセージ rows=10></textarea><div class=submit-notice><strong class="submit-notice-text submit-success hidden">コメントありがとうございます！承認されるとサイトに表示されます。</strong>
<strong class="submit-notice-text submit-failed hidden">申し訳ありません。送信中にエラーが発生しました。必須入力フィールドがすべて入力されていることを確認して、もう一度やりなおしてください。</strong></div><input type=submit value=送信する class=button>
<input type=submit value=送信しました class="hidden button" disabled>
<input type=reset value=リセット class=button></form></div><div><h2>コメント</h2></div></article><div class=pagination><a href=/blog/blog/20201007/ class="button left"><span>Angular9系以上でBootstrap4を使う</span></a>
<a href=/blog/blog/20200927/ class="button right"><span>carbonara</span></a></div></main><section id=site-sidebar><section id=recent-posts><header><h1>最近の投稿</h1></header><article class=mini-post><a href=/blog/blog/20201014/ class=image style="--bg-image: url('https://shukawam.github.io/blog/img/2020/1007/main.png')"><img src=https://shukawam.github.io/blog/img/2020/1007/main.png alt=main></a><header><h2><a href=/blog/blog/20201014/>Angularでバックエンドサーバにプロキシする</a></h2><time class=published datetime="2020-10-14 00:00:00 +0000 UTC">2020-10-14</time></header></article><article class=mini-post><a href=/blog/blog/20201007/ class=image style="--bg-image: url('https://shukawam.github.io/blog/img/2020/1007/main.png')"><img src=https://shukawam.github.io/blog/img/2020/1007/main.png alt=main></a><header><h2><a href=/blog/blog/20201007/>Angular9系以上でBootstrap4を使う</a></h2><time class=published datetime="2020-10-07 00:00:00 +0000 UTC">2020-10-07</time></header></article><article class=mini-post><a href=/blog/blog/20201005/ class=image style="--bg-image: url('https://shukawam.github.io/blog/img/2020/1004/main.png')"><img src=https://shukawam.github.io/blog/img/2020/1004/main.png alt=main></a><header><h2><a href=/blog/blog/20201005/>Spring Boot ApplicationからAutonomous Transaction Processing（ATP）に接続する</a></h2><time class=published datetime="2020-10-05 00:00:00 +0000 UTC">2020-10-05</time></header></article><article class=mini-post><a href=/blog/blog/20200927/ class=image style="--bg-image: url('https://shukawam.github.io/blog/img/2020/0927/Carbonara.jpg')"><img src=https://shukawam.github.io/blog/img/2020/0927/Carbonara.jpg alt></a><header><h2><a href=/blog/blog/20200927/>carbonara</a></h2><time class=published datetime="2020-09-26 00:00:00 +0000 UTC">2020-09-26</time></header></article><article class=mini-post><a href=/blog/blog/20200915/ class=image style="--bg-image: url('https://shukawam.github.io/blog/img/2019/03/pic01.jpg')"><img src=https://shukawam.github.io/blog/img/2019/03/pic01.jpg alt="Mountain Scene"></a><header><h2><a href=/blog/blog/20200915/>僕が転職活動をどのように行っていたか</a></h2><time class=published datetime="2020-09-15 00:00:00 +0000 UTC">2020-09-15</time></header></article><footer><a href=/blog/blog class=button>続きを見る</a></footer></section><section id=categories><header><h1><a href=/blog/categories>カテゴリー</a></h1></header><ul><li><a href=/blog/categories/tech/>tech<span class=count>6</span></a><li><a href=/blog/categories/cooking/>cooking<span class=count>1</span></a><li><a href=/blog/categories/poem/>poem<span class=count>1</span></a></li></ul></section></section><footer id=site-footer><ul class=socnet-icons><li><a href=//github.com/shukawam target=_blank rel=noopener title=GitHub class="fab fa-github"></a></li><li><a href=//gitlab.com/s.kawamura target=_blank rel=noopener title=GitLab class="fab fa-gitlab"></a></li><li><a href=//twitter.com/_shu_kawa target=_blank rel=noopener title=Twitter class="fab fa-twitter"></a></li><li><a href=mailto:s001.kawamura@gmail.com target=_blank title=Email class="far fa-envelope"></a></li></ul><p class=copyright>© 2020 Kawash's Daily Blog<br>Theme: <a href=https://github.com/pacollins/hugo-future-imperfect-slim target=_blank rel=noopener>Hugo Future Imperfect Slim</a><br>A <a href=https://html5up.net/future-imperfect target=_blank rel=noopener>HTML5 UP port</a> | Powered by <a href=https://gohugo.io/ title=0.74.2 target=_blank rel=noopener>Hugo</a></p></footer><a id=back-to-top href=# class="fas fa-arrow-up fa-2x"></a><script src=/blog/js/highlight.js></script><script>hljs.initHighlightingOnLoad();</script><script src=/blog/js/bundle.min.5955090a3253deadcd66071270aa2274dabe15ffc97094cec252d87b6f3f00bf.js integrity="sha256-WVUJCjJT3q3NZgcScKoidNq+Ff/JcJTOwlLYe28/AL8="></script><script src=/blog/js/add-on.js></script></div></body></html>